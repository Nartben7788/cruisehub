<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link
            rel="stylesheet"
            type="text/css"
            href="{{ url_for('static', filename='definitions.css') }}" />
        <link
            rel="stylesheet"
            type="text/css"
            href="{{ url_for('static', filename='output.css') }}" />
        <title>User Dashboard</title>
    </head>
    <body class="bg-blue-light">
        <!-- Navigation bar for user Dashboard -->
        <nav class="container py-5">
            <ul class="flex justify-between w-full">
                <li>
                    <a href="{{ url_for('user_dashboard') }}" class="text-blue font-bold"
                        >CruiseHub</a
                    >
                </li>
                <li>
                    <a href="{{url_for('logout')}}" class="hover:text-red-500">Log out</a>
                </li>
            </ul>
        </nav>

        <h1 class="container text-center my-10 text-6xl font-bold leading-normal">
            Welcome <span class="text-blue">{{ user.username }}</span> <br />
            Explore Our Fleets
        </h1>

        <!-- Filter Form -->
        <section class="container flex gap-3 justify-center">
            <form action="{{ url_for('user_dashboard') }}" method="GET" class="flex gap-3">
                <!-- <label for="make">Make:</label> -->
                <input
                    type="text"
                    name="make"
                    id="make"
                    placeholder="Make"
                    class="p-4 inline-block w-full bg-transparent border-2 border-gray-200" />
                <!-- <label for="model">Model:</label> -->
                <input
                    type="text"
                    name="model"
                    id="model"
                    placeholder="Model"
                    class="p-4 inline-block w-full bg-transparent border-2 border-gray-200" />
                <!-- <label for="price">Price:</label> -->
                <input
                    type="number"
                    name="price"
                    id="price"
                    placeholder="Price"
                    class="p-4 inline-block w-full bg-transparent border-2 border-gray-200" />
                <button type="submit" class="btn-primary inline-block">Filter</button>
            </form>

            <form action="{{ url_for('clear_filters') }}" method="GET">
                <button type="submit" class="btn-secondary inline-block">Clear Filters</button>
            </form>
        </section>

        <!-- Car Gallery -->
        <div class="container grid grid-cols-3 gap-x-4 gap-y-8 my-5">
            {% for car in filtered_cars.items %}
            <div class="rounded-md overflow-hidden border">
                <a href="{{ url_for('car_profile', car_id=car.id) }}" target="_blank">
                    <img
                        src="{{ car.picture }}"
                        class="h-60 w-full object-cover"
                        alt="Car Picture" />
                </a>
                <div class="p-2">
                    <h4>{{ car.make }} {{ car.model }}</h4>

                    <div class="flex justify-between items-center mt-3">
                        <p class="text-2xl font-bold">${{ car.price }}</p>
                        <a
                            href="{{ url_for('reservation', car_id=car.id) }}"
                            class="btn-primary p-2"
                            >Reserve</a
                        >
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Pagination controls -->
        <div class="pagination mt-8 flex justify-center gap-3">
            {% if filtered_cars.has_prev %}
            <a
                href="{{ url_for('user_dashboard', page=filtered_cars.prev_num) }}"
                class="hover:text-red-500"
                >Previous</a
            >
            {% endif %} {% for num in filtered_cars.iter_pages(left_edge=2, right_edge=1,
            left_current=1, right_current=2) %} {% if num %} {% if num != filtered_cars.page %}
            <a href="{{ url_for('user_dashboard', page=num) }}" class="hover:text-red-500"
                >{{ num }}</a
            >
            {% else %}
            <strong>{{ num }}</strong>
            {% endif %} {% else %}
            <span>...</span>
            {% endif %} {% endfor %} {% if filtered_cars.has_next %}
            <a
                href="{{ url_for('user_dashboard', page=filtered_cars.next_num) }}"
                class="hover:text-red-500"
                >Next</a
            >
            {% endif %}
        </div>
    </body>
</html>
